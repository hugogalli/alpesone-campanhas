{% set c = campaign %}

{# =========================
   SEÇÃO 1: HERO COM TÍTULO EM BOX E FORM COMPACTO
   ========================= #}
{% set c = campaign %}
<section class="relative w-full overflow-hidden bg-[#0b2c5a]">
  {# Banner responsivo #}
  <picture>
    {% if c.section1.banner_mobile %}
      <source media="(max-width: 768px)" srcset="{{ c.section1.banner_mobile|media }}">
    {% endif %}
    {% if c.section1.banner_desktop %}
      <img src="{{ c.section1.banner_desktop|media }}"
           alt="{{ c.section1.title ?? '' }}"
           class="w-full h-[72vh] md:h-[80vh] object-cover opacity-90" />
    {% else %}
      <div class="w-full h-[72vh] md:h-[80vh] bg-[#0b2c5a]"></div>
    {% endif %}
  </picture>

  {# Overlay sutil para contraste #}
  <div class="absolute inset-0 bg-gradient-to-br from-black/20 via-black/10 to-transparent"></div>

  {# Conteúdo #}
  <div class="absolute inset-0">
    <div class="container mx-auto h-full px-4">
      <div class="grid grid-cols-12 gap-6 items-center h-full">

        {# Título em box com tipografia fluida (ocupa % do banner no mobile) #}
        <div class="col-span-12 md:col-span-6 lg:col-span-5">
          {% if c.section1.title or c.section1.subtitle %}
          <div class="inline-block bg-black/35 backdrop-blur-[2px] px-5 py-4 rounded-md shadow-lg">
            {% if c.section1.title %}
              <h1 class="text-white font-extrabold leading-tight"
                  style="font-size:clamp(22px, 6vw, 48px); line-height:1.1;">
                {{ c.section1.title }}
              </h1>
            {% endif %}
            {% if c.section1.subtitle %}
              <p class="text-white/90"
                 style="font-size:clamp(14px, 3.5vw, 20px);">
                {{ c.section1.subtitle }}
              </p>
            {% endif %}
          </div>
          {% endif %}
        </div>

        {# Respiro central #}
        <div class="hidden md:block md:col-span-2 lg:col-span-3"></div>

        {# Form compacto à direita — escondido no mobile #}
        <div class="hidden md:block md:col-span-4">
          <div class="bg-white rounded-xl shadow-[0_10px_30px_rgba(0,0,0,.25)] p-6 max-w-sm mx-auto">
            <h3 class="text-gray-900 text-[18px] font-semibold mb-4">
              Solicite <span class="font-bold">uma Cotação</span>
            </h3>

            <form class="space-y-3" action="javascript:void(0);" aria-label="Formulário de cotação">
              <div>
                <label class="block text-sm text-gray-700">Nome</label>
                <input type="text" placeholder="Digite seu nome"
                       class="w-full border-0 border-b border-gray-300 bg-transparent focus:ring-0 focus:border-gray-800 py-1.5">
              </div>

              <div>
                <label class="block text-sm text-gray-700">E-mail</label>
                <input type="email" placeholder="Digite seu e-mail"
                       class="w-full border-0 border-b border-gray-300 bg-transparent focus:ring-0 focus:border-gray-800 py-1.5">
              </div>

              <div>
                <label class="block text-sm text-gray-700">Telefone</label>
                <input type="tel" placeholder="(DDD) 00000-0000"
                       class="w-full border-0 border-b border-gray-300 bg-transparent focus:ring-0 focus:border-gray-800 py-1.5">
              </div>

              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm text-gray-700">Estado</label>
                  <select class="w-full border-0 border-b border-gray-300 bg-transparent focus:ring-0 focus:border-gray-800 py-1.5">
                    <option selected disabled>Selecionar</option>
                    <option>SP</option><option>RJ</option><option>MG</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm text-gray-700">Cidade</label>
                  <select class="w-full border-0 border-b border-gray-300 bg-transparent focus:ring-0 focus:border-gray-800 py-1.5">
                    <option selected disabled>Selecionar</option>
                  </select>
                </div>
              </div>

              <div>
                <label class="block text-sm text-gray-700">Unidade</label>
                <select class="w-full border-0 border-b border-gray-300 bg-transparent focus:ring-0 focus:border-gray-800 py-1.5">
                  <option selected disabled>Selecionar</option>
                </select>
              </div>

              <div>
                <label class="block text-sm text-gray-700">Modelo</label>
                <select class="w-full border-0 border-b border-gray-300 bg-transparent focus:ring-0 focus:border-gray-800 py-1.5">
                  <option selected disabled>{{ c.section1.title ?? 'Selecionar' }}</option>
                </select>
              </div>

              <div>
                <label class="block text-sm text-gray-700">Mensagem</label>
                <textarea rows="2" placeholder="Escreva sua mensagem"
                          class="w-full border-0 border-b border-gray-300 bg-transparent focus:ring-0 focus:border-gray-800 py-1.5 resize-none"></textarea>
              </div>

              {# Checkboxes como no print #}
              <div class="pt-1">
                <p class="text-xs text-gray-700 mb-1">Quero receber contato por:</p>
                <div class="flex flex-wrap gap-x-6 gap-y-2 text-sm text-gray-700">
                  <label class="inline-flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"> Telefone</label>
                  <label class="inline-flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"> E-mail</label>
                  <label class="inline-flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"> WhatsApp</label>
                </div>
              </div>

              <label class="flex items-start gap-2 text-[12px] text-gray-600">
                <input type="checkbox" class="mt-0.5 rounded border-gray-300">
                <span>Aceito a <a href="#" class="underline">Política de Privacidade</a></span>
              </label>

              <button type="submit"
                      class="w-full rounded-full bg-[#0b2c5a] text-white py-2.5 font-semibold shadow-md hover:opacity-95 transition">
                Enviar
              </button>
            </form>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>


{# =========================
   SEÇÃO 2: GALERIA (CENTRO REAL + LEGENDA SOLTA)
   ========================= #}
{% set galeria = c.section2.gallery ?? [] %}
{% set gid = 'galeria-' ~ c.id %}

<section class="py-12 md:py-16">
  {# wrapper full-width, nós controlamos a largura #}
  <div class="w-full px-4">
    {% if c.section2.title or c.section2.subtitle %}
      <header class="text-center mb-8 md:mb-10 max-w-3xl mx-auto">
        {% if c.section2.title %}
          <h2 class="text-3xl md:text-4xl font-semibold text-gray-900">{{ c.section2.title }}</h2>
        {% endif %}
        {% if c.section2.subtitle %}
          <p class="mt-3 text-gray-600 text-lg">{{ c.section2.subtitle }}</p>
        {% endif %}
      </header>
    {% endif %}

    {% if galeria|length %}
      <div id="{{ gid }}" class="relative mx-auto max-w-3xl">  {# centro REAL #}

        {# janela #}
        <div class="overflow-hidden rounded-xl border border-gray-200 shadow-sm bg-white">
          {# trilho #}
          <div class="flex transition-transform duration-500 will-change-transform" data-role="track">
            {% for item in galeria %}
              <figure class="w-full shrink-0 m-0">
                {% if item.image %}
                  <img src="{{ item.image|media }}"
                       alt="{{ item.alt ?? '' }}"
                       data-caption="{{ item.alt ?? '' }}"
                       class="block w-full aspect-[16/9] max-h-[480px] object-cover" />
                {% else %}
                  <div class="block w-full aspect-[16/9] max-h-[480px] bg-gray-100"></div>
                {% endif %}
              </figure>
            {% endfor %}
          </div>
        </div>

        {# setas DENTRO da moldura #}
        <button type="button" aria-label="Anterior"
                class="absolute left-3 top-1/2 -translate-y-1/2 bg-white text-gray-900 rounded-full h-10 w-10 flex items-center justify-center shadow ring-1 ring-black/5"
                data-role="prev">‹</button>
        <button type="button" aria-label="Próximo"
                class="absolute right-3 top-1/2 -translate-y-1/2 bg-white text-gray-900 rounded-full h-10 w-10 flex items-center justify-center shadow ring-1 ring-black/5"
                data-role="next">›</button>
      </div>

      {# legenda solta, tipografia melhor #}
      <p id="{{ gid }}-caption"
         class="mt-4 text-center text-lg md:text-xl font-semibold text-gray-800 tracking-wide"></p>

      {# botão #}
      <div class="mt-8 md:mt-10 text-center">
        <a href="#contato"
           class="inline-block rounded-full bg-[#0b2c5a] text-white px-8 py-3 font-semibold shadow hover:opacity-95 transition">
          Tenho interesse
        </a>
      </div>

      <script>
        (function() {
          var root = document.getElementById('{{ gid }}');
          if (!root) return;

          var track   = root.querySelector('[data-role="track"]');
          var slides  = Array.prototype.slice.call(track.children);
          var prevBtn = root.querySelector('[data-role="prev"]');
          var nextBtn = root.querySelector('[data-role="next"]');
          var caption = document.getElementById('{{ gid }}-caption');
          var index   = 0;

          function setWidths() { slides.forEach(function(el){ el.style.width = '100%'; }); }
          function update() {
            track.style.transform = 'translateX(' + (-index * 100) + '%)';
            var img = slides[index].querySelector('img');
            caption.textContent = img ? (img.getAttribute('data-caption') || '') : '';
          }

          prevBtn.addEventListener('click', function () { index = (index - 1 + slides.length) % slides.length; update(); });
          nextBtn.addEventListener('click', function () { index = (index + 1) % slides.length; update(); });

          window.addEventListener('resize', setWidths);
          setWidths(); update();
        })();
      </script>
    {% endif %}
  </div>
</section>


{# =========================
   SEÇÃO 3: DESTAQUES (VERTICAL, ALTERNADO)
   ========================= #}
{% set destaques = c.section3.highlights ?? [] %}
{% if destaques|length %}
<section class="py-12 md:py-16">
  <div class="w-full px-4">
    <div class="space-y-14 md:space-y-20 max-w-5xl mx-auto">
      {% for h in destaques|slice(0,3) %}
        {% set isOdd = loop.index0 % 2 == 1 %}

        <article class="grid grid-cols-1 md:grid-cols-12 gap-6 md:gap-10 items-center">
          {# IMAGEM #}
          <div class="md:col-span-7 {{ isOdd ? 'md:order-2' : 'md:order-1' }}">
            {% if h.image %}
              <img src="{{ h.image|media }}"
                   alt="{{ h.title ?? '' }}"
                   class="w-full h-[420px] rounded-xl shadow object-cover" />
            {% else %}
              <div class="w-full aspect-[16/9] bg-gray-100 rounded-xl"></div>
            {% endif %}
          </div>

          {# TEXTO + CTA #}
          <div class="md:col-span-5 {{ isOdd ? 'md:order-1' : 'md:order-2' }}">
            {% if h.title %}
              <h3 class="text-3xl md:text-4xl font-semibold text-gray-900">{{ h.title }}</h3>
            {% endif %}

            {% if h.description %}
              <p class="mt-3 text-gray-700 text-lg leading-relaxed">
                {{ h.description }}
              </p>
            {% endif %}

            <a href="#contato"
               class="inline-block mt-6 rounded-full bg-[#0b2c5a] text-white px-6 py-2.5 font-semibold shadow hover:opacity-95 transition">
              Tenho interesse
            </a>
          </div>
        </article>
      {% endfor %}
    </div>
  </div>
</section>
{% endif %}


{# =========================
   FOOTER DA LANDING
   ========================= #}
<section class="py-10 md:py-14 bg-gray-50">
  <div class="container mx-auto text-center">
    {% if c.footer.title %}
      <h4 class="text-xl md:text-2xl font-semibold text-gray-900">
        {{ c.footer.title }}
      </h4>
    {% endif %}

    {% if c.footer.image %}
      <div class="mt-8 flex justify-center">
        <img src="{{ c.footer.image|media }}" 
             alt="{{ c.footer.title ?? '' }}"
             class="h-24 md:h-28 lg:h-32 object-contain mx-auto" />
      </div>
    {% endif %}
  </div>
</section>
